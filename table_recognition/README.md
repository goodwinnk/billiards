
## find_table_polygon

Берет видео в формате `.mp4`. Для каждого кадра находит многоугольник, который описывает стол.
Стол задается в виде четырехугольника. Результат записывается в файл, путь к которому нужно
указать в качестве аргумента скрипта.

### Формат вывода

Для каждого фрейма в отдельной строке записывается 8 чисел `x_1, y_1, ..., x_4, y_4`

Где 

* `x_i` - номер строки (первая координата картинки)
* `y_i` - номер столбца (вторая координата картинки)

**ВНИМАНИЕ:** координаты могут выходить за пределы картинки 
(это значит, что стол виден не полностью) 

#### Пример запуска

`python3 find_table_polygon.py --video video.mp4 --layout layout.txt`


Приложение на desktop для сбора данных для задача детектирования стола.

#### Ориентиры

В датасете `Tiny ImageNet` содержится **200** классов, для каждого класса есть **500** 
тренировочных картинок, по **50** картинок для теста и валидации, т.е. **600** картинок на
класс. Значит всего **120000** (120 тысяч картинок) 

### Описание приложения

Приложение в качестве аргументов принимает:
 
 * путь до папки, где находятся только картинки
 
 * путь до файла, где будут сохранены координаты четырехугольника (стол)
 
 *Описание формата стола будет ниже*
 
 Далее, прилоежение запускает viewer на тех картинках, которых еще нет в датасете 
 (которых еще нет в указанном файле), пользователь может нажатием мышки указать реальное
 положение углов и луз на картинке (причем есть два положения луз в зависимости от того, 
 на каких двух противположных бортах располоежены бортовые лузы), после того как пользователь
 указал все необходимое, он может нажать на кнопку далее (next) и перейти к следующей картинке,
 при этом новые координаты будут дописаны в файл.
 
### Описание формата стола
 
Пусть заданы 4 угла, возьмем самую верхную-левую точку и запишем все углы в порядке по или
против часовой стрелке. Занумеруем в таком виде углы нчиная с нуля. Таким образом, для стола 
будет дописано 9 чисел: 8 из них - это координаты углов, 9-е число - это 0 или 1, оно показывает
конфигурацию луз. Если стоит 0, то лузы на отрезке между 0-м и 1-м углами нет, иначе есть.


В любой момент можно прекратить процесс, нажатием на клавишу close, при этом полученные данные
никуда не пропадут.


#### Как пользоваться 

При нажатии на картинку ближайший из углов будет перемещен в место нажатия на клавишу, 
также можно сами углы просто перетаскивать.

При нажатии на:

* `d` (`done`) - координаты стола будут дописаны в файл и прилоежение перейдет к следующей картинке

* `q` (`quit`) - выход из приложения

* `r` (`rotate/reverse`) - поменять расположение луз

* `s` (`skip`) - пропустить картинку

#### Пример запуска

`python3 ds_collect_helper.py --dir images_for_dataset/ --layout images_for_dataset/layout.csv`
